# üé• Mux + –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ - –ë—ã—Å—Ç—Ä—ã–π –ì–∏–¥

## ‚ú® –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. **–ù–æ–≤—ã–π –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä —Å Mux**
–§–∞–π–ª: `lib/presentation/widgets/mux_video_player_widget.dart`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìπ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Mux HLS (.m3u8)
- üì± –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ (assets/videos/)
- üîä –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥—Ä–æ–º–∫–æ—Å—Ç—å
- üéØ –ë–µ–∑ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
- ‚ö° –ë–µ–∑ –æ—à–∏–±–æ–∫ –∞—É–¥–∏–æ

### 2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏**
**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏
2. UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
   - –ö–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ (like, comment, share)
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ
   - –ì—Ä–∞–¥–∏–µ–Ω—Ç —Å–Ω–∏–∑—É
3. –û—Ç–ø—É—Å–∫–∞–µ—Ç –ø–∞–ª—å—Ü—ã ‚Üí UI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è

### 3. **–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
–ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –≤–∏–¥–µ–æ:
```
"Pinch to zoom video" üîç
```

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã:
```bash
flutter pub get
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter run -d emulator-5554
```

### 3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∏–¥–µ–æ
- –£–≤–µ–ª–∏—á—å—Ç–µ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏
- UI –∏—Å—á–µ–∑–Ω–µ—Ç!

---

## üé¨ –§–æ—Ä–º–∞—Ç—ã –≤–∏–¥–µ–æ

### –°–µ–π—á–∞—Å (–ª–æ–∫–∞–ª—å–Ω—ã–µ):
```
assets/videos/video1.mp4
assets/videos/video2.mp4
...
```

### –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ Mux:
```
https://stream.mux.com/YOUR_PLAYBACK_ID.m3u8
```

–ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ `videoUrl` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö!

---

## üìä –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å Mux

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏ Mux
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://dashboard.mux.com/
2. Settings ‚Üí Access Tokens
3. Create New Token

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ Supabase
```sql
ALTER TABLE posts 
ADD COLUMN mux_playback_id TEXT,
ADD COLUMN mux_asset_id TEXT;
```

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ –≤ Mux
```bash
curl -X POST https://api.mux.com/video/v1/assets \
  -H "Content-Type: application/json" \
  -u YOUR_TOKEN_ID:YOUR_TOKEN_SECRET \
  -d '{
    "input": "https://your-video-url.mp4",
    "playback_policy": ["public"]
  }'
```

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Playback ID
```dart
final muxUrl = 'https://stream.mux.com/${playbackId}.m3u8';

await supabase.from('posts').update({
  'media_url': muxUrl,
  'mux_playback_id': playbackId,
});
```

---

## üéØ –¢–µ—Å—Ç —Å –≥–æ—Ç–æ–≤—ã–º Mux –≤–∏–¥–µ–æ

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π Mux stream:

```dart
// –í local_video_datasource.dart –∑–∞–º–µ–Ω–∏—Ç–µ URL:
VideoModel(
  id: '1',
  videoUrl: 'https://stream.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe.m3u8',
  // ... rest
)
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è?
```dart
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç URL –≤ –∫–æ–Ω—Å–æ–ª–∏:
print('Loading video: ${widget.videoUrl}');
```

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–¥–≤–∞ –ø–∞–ª—å—Ü–∞**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `_isZoomed` –º–µ–Ω—è–µ—Ç—Å—è:
```dart
print('Is zoomed: $_isZoomed');
```

### UI –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è?
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ª–æ–≤–∏–µ –≤ `video_feed_item.dart`:
```dart
if (!_isZoomed) // ‚Üê –î–æ–ª–∂–Ω–æ –±—ã—Ç—å
  VideoActions(...),
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ UI —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∑—É–º–µ
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ Mux –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üîú –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–ª—å—à–µ

1. **UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ**
   - –í—ã–±—Ä–∞—Ç—å –≤–∏–¥–µ–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ Mux
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Supabase

2. **Mux Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - Supabase Edge Function –¥–ª—è Mux API
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
   - –ü–æ–ª—É—á–µ–Ω–∏–µ Playback ID

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ Mux**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
   - –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `flutter run --verbose`
2. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç—ã URL

---

–ì–æ—Ç–æ–≤–æ! üéâ –¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ Mux Video Player
- ‚úÖ Pinch to Zoom
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ UI
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

