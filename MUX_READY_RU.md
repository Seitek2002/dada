# üé¨ Mux Video Player - –ì–æ—Ç–æ–≤–æ!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **Mux Video Player –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `better_player` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **Mux HLS** (.m3u8 streams)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–ª–æ–∫–∞–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ** (assets)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–æ–±—ã—á–Ω—ã—Ö MP4** —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∞—É–¥–∏–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏** 
- ‚úÖ **Pinch to zoom** - —É–≤–µ–ª–∏—á—å—Ç–µ –≤–∏–¥–µ–æ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ UI** –ø—Ä–∏ –∑—É–º–µ
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ "Pinch to zoom video" (–∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã)

### 3. **UI —ç–ª–µ–º–µ–Ω—Ç—ã —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑—É–º–µ**
- ‚ùå **–ö–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞** (like, comment, share) - —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è
- ‚ùå **–û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ** (—Å–Ω–∏–∑—É) - —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚ùå **–ì—Ä–∞–¥–∏–µ–Ω—Ç overlay** - —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ **–¢–æ–ª—å–∫–æ –≤–∏–¥–µ–æ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω!**

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–£–≤–µ–ª–∏—á—å—Ç–µ –≤–∏–¥–µ–æ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏** ü§è
3. UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–Ω–µ—Ç
4. **–û—Ç–ø—É—Å—Ç–∏—Ç–µ –ø–∞–ª—å—Ü—ã** ‚Üí UI –≤–µ—Ä–Ω—ë—Ç—Å—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mux –≤–∏–¥–µ–æ:
```dart
// –í –≤–∞—à–µ–º video_entity.dart —É–∫–∞–∂–∏—Ç–µ Mux URL:
videoUrl: "https://stream.mux.com/YOUR_PLAYBACK_ID.m3u8"
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ:
```dart
// –û–±—ã—á–Ω—ã–µ assets —Ñ–∞–π–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ:
videoUrl: "assets/videos/video1.mp4"
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### MuxVideoPlayerWidget

**–§–∞–π–ª:** `lib/presentation/widgets/mux_video_player_widget.dart`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- `BetterPlayer` –≤–º–µ—Å—Ç–æ `video_player`
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–∏–¥–µ–æ (HLS / MP4 / Asset)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `GestureDetector`
- Callback `onZoomChanged` –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—è

**–ö–æ–¥:**
```dart
MuxVideoPlayerWidget(
  videoUrl: video.videoUrl,
  isPlaying: isCurrentPage,
  onProgressUpdate: (progress) {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  },
  onZoomChanged: (isZoomed) {
    // UI —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
    setState(() => _isZoomed = isZoomed);
  },
)
```

### VideoFeedItem

**–§–∞–π–ª:** `lib/presentation/screens/home/video_feed_item.dart`

**–õ–æ–≥–∏–∫–∞ —Å–∫—Ä—ã—Ç–∏—è UI:**
```dart
// –°–∫—Ä—ã—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç –ø—Ä–∏ –∑—É–º–µ
if (!_isZoomed)
  Positioned(/* gradient */),

// –°–∫—Ä—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –∑—É–º–µ  
if (!_isZoomed)
  SafeArea(/* UI elements */),
```

---

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ –∑—É–º–∞:

**–§–∞–π–ª:** `lib/presentation/widgets/mux_video_player_widget.dart`

```dart
void _handleScaleUpdate(ScaleUpdateDetails details) {
  setState(() {
    _scale = details.scale;
    // –ò–∑–º–µ–Ω–∏—Ç–µ 1.2 –Ω–∞ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.5)
    final newIsZoomed = _scale > 1.2; // ‚Üê –ó–¥–µ—Å—å
    
    if (newIsZoomed != _isZoomed) {
      _isZoomed = newIsZoomed;
      widget.onZoomChanged?.call(_isZoomed);
    }
  });
}
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É:

**–§–∞–π–ª:** `lib/presentation/screens/home/video_feed_item.dart`

```dart
// –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ 131-176
/*
if (!_isZoomed && widget.isCurrentPage)
  Positioned(
    // ... hint widget
  ),
*/
```

---

## üîß –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```yaml
dependencies:
  better_player: ^0.0.83  # ‚úÖ –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  video_player: ^2.10.1   # ‚úÖ –î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```

---

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
flutter run -d emulator-5554
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
2. ‚úÖ –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è  
3. ‚úÖ –£–≤–µ–ª–∏—á—å—Ç–µ –¥–≤—É–º—è –ø–∞–ª—å—Ü–∞–º–∏
4. ‚úÖ UI –∏—Å—á–µ–∑–∞–µ—Ç
5. ‚úÖ –û—Ç–ø—É—Å—Ç–∏—Ç–µ - UI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è

---

## üé¨ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Mux

### 1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ Mux.com

https://dashboard.mux.com/signup

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Assets**
2. –ù–∞–∂–º–∏—Ç–µ **Upload Video**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 3. –ü–æ–ª—É—á–∏—Ç–µ Playback ID

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
```
Playback ID: abc123xyz
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```dart
// –§–æ—Ä–º–∞—Ç Mux URL:
final muxUrl = "https://stream.mux.com/abc123xyz.m3u8";

// –í –≤–∞—à–µ–º Supabase (—Ç–∞–±–ª–∏—Ü–∞ posts):
{
  "media_url": "https://stream.mux.com/abc123xyz.m3u8",
  "media_type": "video",
  "thumbnail_url": "https://image.mux.com/abc123xyz/thumbnail.jpg"
}
```

---

## üöÄ Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ HLS —Å—Ç—Ä–∏–º–∏–Ω–≥ (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ (assets)
- ‚úÖ –û–±—ã—á–Ω—ã–µ MP4 URL
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ UI
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (views, completions)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- ‚ö†Ô∏è –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ Mux HLS**
- ‚ö†Ô∏è –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–º–æ
- ‚ö†Ô∏è –î–æ–±–∞–≤—å—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è thumbnails
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è Mux

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Mux

| –§—É–Ω–∫—Ü–∏—è | Mux HLS | MP4 |
|---------|---------|-----|
| –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ | ‚úÖ | ‚ùå |
| –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ | ‚úÖ | ‚ùå |
| –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ | ‚úÖ | ‚ùå |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | ‚úÖ | ‚ùå |
| DRM –∑–∞—â–∏—Ç–∞ | ‚úÖ | ‚ùå |

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- ‚úÖ **Mux Video Player** —Å BetterPlayer
- ‚úÖ **Pinch to zoom** –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤–∏–¥–µ–æ
- ‚úÖ **–ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ UI** –ø—Ä–∏ –∑—É–º–µ
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –æ—à–∏–±–æ–∫

**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!** üöÄ

```bash
flutter run -d emulator-5554
```

---

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏

### –í–∏–¥–µ–æ –Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å .m3u8 –¥–ª—è HLS)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Mux Asset –≥–æ—Ç–æ–≤ (status: ready)

### UI –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è?
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑—É–º > 1.2 (–ø–æ—Ä–æ–≥)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `onZoomChanged` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–¥–≤–∞ –ø–∞–ª—å—Ü–∞** –¥–ª—è –∑—É–º–∞

### –õ–∞–≥–∏ –ø—Ä–∏ –∑—É–º–µ?
- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ –≤ Mux
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HLS –≤–º–µ—Å—Ç–æ MP4
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç–º—É–ª—è—Ç–æ—Ä–∞

---

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!** –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –ø–ª–∞–≤–Ω—ã–º –≤–∏–¥–µ–æ –∫–∞–∫ –≤ TikTok! üé¨‚ú®

